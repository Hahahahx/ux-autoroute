import("data:text/javascript;base64,Cg==");import{r as e,_ as t,u as n,R as r,S as l,a as o,b as a,c as i,H as c,d as u,B as m,N as s,l as d,e as f}from"./vendor.7afd1d34.js";function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var v=e.exports.createContext({routers:[]}),E=function(){var t=e.exports.useContext(v);return t.router?t.router:r.createElement(r.Fragment,null)},g=function(){var t=n();return h(h({},e.exports.useContext(v)),{},{history:t})},y=e.exports.createContext({htmlMeta:{link:new Array,meta:new Array,title:"",javascript:new Array},setHtmlMeta:function(){}}),b=function(e){var t=e.before,n=e.after,i=e.routers,c=e.noMatch,u=i.find((function(e){var t;return(null===(t=e.config)||void 0===t?void 0:t.default)&&e.path})),m=u&&u.path.match(/\/[a-z]+/g);return m&&(m.pop(),m=m.length?m.join(""):"/"),r.createElement(l,null,i.map((function(e,l){var a;return r.createElement(o,{exact:!(null==e||null===(a=e.config)||void 0===a||!a.exact),path:e.path,key:l,render:function(){if(t){var l=t(location);if(l)return l}return r.createElement(v.Provider,{value:{routers:e.child||[],config:e.config,router:e.child&&e.child.length?r.createElement(O,{routers:e.child,noMatch:c}):void 0}},r.createElement(e.component,null),n&&n(location))}})})),u&&r.createElement(a,{exact:!0,from:m||"/",to:u.path}),r.createElement(o,{path:"/*",render:function(){return i.find((function(e){return e.path.includes(location.pathname)}))?null:c}}))},O=r.memo(b,(function(e,t){return!1})),x=function(t){var n,l,o,a=e.exports.useState({link:new Array,meta:new Array,title:"",javascript:new Array}),s=i(a,2),d=s[0],f=s[1];return r.createElement(y.Provider,{value:{htmlMeta:d,setHtmlMeta:f}},r.createElement(c,null,null==d||null===(n=d.meta)||void 0===n?void 0:n.map((function(e){return r.createElement("meta",e)})),r.createElement("title",null,null==d?void 0:d.title),null==d||null===(l=d.link)||void 0===l?void 0:l.map((function(e){return r.createElement("link",e)})),null==d||null===(o=d.javascript)||void 0===o?void 0:o.map((function(e){return r.createElement("script",e)}))),"hash"==t.type?r.createElement(u,null,r.createElement(j,{routers:t.routers,listen:t.listen}),r.createElement(O,t)):r.createElement(m,null,r.createElement(j,{routers:t.routers,listen:t.listen}),r.createElement(O,t)))},j=r.memo((function(t){var l=t.routers,o=t.listen,a=n(),i=e.exports.useContext(y).setHtmlMeta;return e.exports.useEffect((function(){for(var e=0,t=l;t.length>e;){var n,r;if(null!==(n=t[e].child)&&void 0!==n&&n.length)null===(r=t[e].child)||void 0===r||r.forEach((function(e){t.push(e)}));e++}a.listen((function(e){var n,r,l=t.filter((function(t){return t.path===e.pathname}));i(null===(n=l[0])||void 0===n||null===(r=n.config)||void 0===r?void 0:r.htmlmeta),o&&o(e)}))}),[]),r.createElement(r.Fragment,null)}),(function(){return!0}));const w={},k=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in w)return;w[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},P=[{config:{htmlmeta:{title:"根"},noLazy:!0},component:()=>{var e;const{config:t,routers:n,history:l}=g();return r.createElement(r.Fragment,null,r.createElement("ul",null,r.createElement("li",null," ",null==(e=null==t?void 0:t.htmlmeta)?void 0:e.title),n.map(((e,t)=>{var n,l;return r.createElement("li",{key:t},r.createElement(s,{to:e.path},null==(l=null==(n=null==e?void 0:e.config)?void 0:n.htmlmeta)?void 0:l.title))}))),r.createElement("div",null,"/main"!=l.location.pathname,r.createElement(E,null)))},path:"",child:[{config:{default:!0,htmlmeta:{title:"登录"}},component:d((function(){return k((()=>import("./index.4ef26584.js")),["assets/index.4ef26584.js","assets/vendor.7afd1d34.js"])})),path:"/login",child:null},{config:{htmlmeta:{title:"首页"},noLazy:!0},component:()=>{var e;const{config:t,routers:n}=g();return r.createElement(r.Fragment,null,null==(e=null==t?void 0:t.htmlmeta)?void 0:e.title,r.createElement("ul",null,n.map(((e,t)=>{var n,l;return r.createElement("li",{key:t},r.createElement(s,{to:e.path},null==(l=null==(n=null==e?void 0:e.config)?void 0:n.htmlmeta)?void 0:l.title))}))),r.createElement("div",null,r.createElement(E,null)))},path:"/main",child:[{config:{htmlmeta:{title:"土豆"}},component:d((function(){return k((()=>import("./index.139b4a90.js")),["assets/index.139b4a90.js","assets/vendor.7afd1d34.js"])})),path:"/main/potato",child:null},{config:{htmlmeta:{title:"西红柿"},noLazy:!0},component:()=>{var e;const{config:t}=g();return r.createElement(r.Fragment,null,null==(e=null==t?void 0:t.htmlmeta)?void 0:e.title)},path:"/main/tomato",child:null}]}]}],L=()=>{const[t,n]=e.exports.useState(2),l=[["/tomato","/potato"],["/main"]],o=e=>()=>{n(e)},a=e=>{switch(Number.isInteger(e)?e:t){case 0:return"高级";case 1:return"中级";case 2:return"低级"}};return r.createElement(r.Fragment,null,r.createElement("div",null,"您的角色权限：",a()),r.createElement("div",null,r.createElement("button",{onClick:o(2)},a(2)),r.createElement("button",{onClick:o(1)},a(1)),r.createElement("button",{onClick:o(0)},a(0))),r.createElement(x,{type:"hash",listen:e=>{},routers:P,before:e=>{const{hash:n}=window.location;if(l.some(((e,r)=>e.some((e=>{if(n.includes(e))return!Number.isInteger(t)||t>r})))))return r.createElement(r.Fragment,null,"您无权访问")},noMatch:r.createElement(r.Fragment,null,"404")}))};f.render(r.createElement(L,null),document.getElementById("root"));export{g as u};
